<div class="container py-3">
  <h2 class="mb-3">Relatórios Base</h2>

  <div class="row g-3">
    <div class="col-12 col-lg-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <span>Lista</span>
          <button class="btn btn-sm btn-primary" (click)="startCreate()">
            <i class="mdi mdi-plus"></i> Novo
          </button>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover table-sm mb-0">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Gerência</th>
                  <th>Turno</th>
                  <th class="text-end">Ações</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let r of (relatorios$ | async)" (dblclick)="startEdit(r)">
                  <td>{{ r.data | date:'dd/MM/yyyy' }}</td>
                  <td>{{ r.gerencia }}</td>
                  <td>{{ r.turno }}</td>
                  <td class="text-end">
                    <button class="btn btn-sm btn-outline-secondary me-1" (click)="startEdit(r)"><i class="mdi mdi-pencil"></i></button>
                    <button class="btn btn-sm btn-outline-danger" (click)="delete(r.idRelatorio)"><i class="mdi mdi-delete"></i></button>
                  </td>
                </tr>
                <tr *ngIf="!(relatorios$ | async)?.length">
                  <td colspan="4" class="text-center text-muted p-3">Nenhum relatório encontrado</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-6">
      <div class="card">
        <div class="card-header">{{ selected?.idRelatorio ? 'Editar Relatório' : 'Novo Relatório' }}</div>
        <div class="card-body">
          <app-relatorio-base-form
            [value]="selected"
            [saving]="saving"
            (submitValue)="onSubmit($event)"
            (cancel)="cancel()"
          ></app-relatorio-base-form>
        </div>
      </div>
    </div>
  </div>
</div>
