<div class="relatorio-form-container">
  <div class="form-header">
    <h2>{{ isEditMode ? 'Editar Relatório Diário' : 'Novo Relatório Diário' }}</h2>
  </div>

  <form [formGroup]="relatorioForm" (ngSubmit)="onSubmit()" class="relatorio-form">
    <div class="form-row">
      <div class="form-group">
        <label for="gerencia">Gerência *</label>
        <select id="gerencia" formControlName="gerencia" class="form-control" 
                [class.is-invalid]="isFieldInvalid('gerencia')">
          <option value="">Selecione uma gerência</option>
          <option *ngFor="let gerencia of gerencias" [value]="gerencia">{{ gerencia }}</option>
        </select>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('gerencia')">
          {{ getFieldError('gerencia') }}
        </div>
      </div>

      <div class="form-group">
        <label for="data">Data *</label>
        <input type="date" id="data" formControlName="data" class="form-control"
               [class.is-invalid]="isFieldInvalid('data')" (change)="onDataChange()">
        <div class="invalid-feedback" *ngIf="isFieldInvalid('data')">
          {{ getFieldError('data') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="diaSemana">Dia da Semana *</label>
        <select id="diaSemana" formControlName="diaSemana" class="form-control"
                [class.is-invalid]="isFieldInvalid('diaSemana')">
          <option value="">Selecione o dia</option>
          <option *ngFor="let dia of diasSemana" [value]="dia">{{ dia }}</option>
        </select>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('diaSemana')">
          {{ getFieldError('diaSemana') }}
        </div>
      </div>

      <div class="form-group">
        <label for="turno">Turno *</label>
        <select id="turno" formControlName="turno" class="form-control"
                [class.is-invalid]="isFieldInvalid('turno')">
          <option value="">Selecione o turno</option>
          <option *ngFor="let turno of turnos" [value]="turno">{{ turno }}</option>
        </select>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('turno')">
          {{ getFieldError('turno') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="mat1">Matrícula 1 *</label>
        <input type="number" id="mat1" formControlName="mat1" class="form-control"
               [class.is-invalid]="isFieldInvalid('mat1')" placeholder="Digite a matrícula">
        <div class="invalid-feedback" *ngIf="isFieldInvalid('mat1')">
          {{ getFieldError('mat1') }}
        </div>
      </div>

      <div class="form-group">
        <label for="mat2">Matrícula 2 *</label>
        <input type="number" id="mat2" formControlName="mat2" class="form-control"
               [class.is-invalid]="isFieldInvalid('mat2')" placeholder="Digite a matrícula">
        <div class="invalid-feedback" *ngIf="isFieldInvalid('mat2')">
          {{ getFieldError('mat2') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="coord">Coordenador *</label>
        <input type="number" id="coord" formControlName="coord" class="form-control"
               [class.is-invalid]="isFieldInvalid('coord')" placeholder="Código do coordenador">
        <div class="invalid-feedback" *ngIf="isFieldInvalid('coord')">
          {{ getFieldError('coord') }}
        </div>
      </div>

      <div class="form-group">
        <label for="superv">Supervisor *</label>
        <input type="number" id="superv" formControlName="superv" class="form-control"
               [class.is-invalid]="isFieldInvalid('superv')" placeholder="Código do supervisor">
        <div class="invalid-feedback" *ngIf="isFieldInvalid('superv')">
          {{ getFieldError('superv') }}
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="relatorioForm.invalid">
        {{ isEditMode ? 'Atualizar' : 'Salvar' }}
      </button>
    </div>
  </form>
</div>
